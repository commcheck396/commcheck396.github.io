I"¨<blockquote>
  <p>æœ¬åŠŸèƒ½åˆ©ç”¨Pythonè¯­è¨€ï¼ŒåŸºäºnumpyåº“å®ç°</p>
</blockquote>

<p><br />
åˆ©ç”¨è’™ç‰¹å¡æ´›æ ‘æœç´¢å®ç°äº”å­æ£‹æ¸¸æˆå¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ å…¥é—¨é¡¹ç›®ï¼Œä¹Ÿç®—æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦æ·±åº¦å­¦ä¹ é¢†åŸŸçš„é¡¹ç›®ï¼Œè¿‡ç¨‹è¿˜ç®—â€œæ¯”è¾ƒâ€é¡ºåˆ©ï¼Œä½†æ˜¯éš¾åº¦ä¸Šè¿˜æ˜¯è¦æ¯”ä¹‹å‰åšè¿‡çš„åˆ©ç”¨Q-learningå®ç°è¿·å®«å¯»è·¯è¦ä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚<br />
è¿™ç¯‡åšå®¢ä¸»è¦ä»‹ç»äº”å­æ£‹ç¯å¢ƒä»¥åŠè¡Œæ£‹åŠ¨ä½œçš„å®ç°ï¼Œå¯¹äºè’™ç‰¹å¡æ´›æ ‘æœç´¢ç®—æ³•çš„ä»‹ç»ç•™åˆ°ä¸‹ä¸€ç¯‡åšå®¢å§ã€‚</p>

<p><br /></p>
<h2 id="äº”å­æ£‹æ£‹å±€ç¯å¢ƒçš„æ­å»º">äº”å­æ£‹æ£‹å±€ç¯å¢ƒçš„æ­å»º</h2>

<p>åˆ›å»ºä¸€ä¸ªæ£‹ç›˜ç±»<code class="language-plaintext highlighter-rouge">Class Board</code>ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œæ£‹å­ï¼Œä¿®æ”¹æ£‹ç›˜æ ¼å±€ã€‚<br />
æ­¤ç±»çš„åŸºæœ¬å±æ€§åŒ…æ‹¬æ£‹ç›˜çš„å®½/é•¿åº¦<code class="language-plaintext highlighter-rouge">size</code>ï¼Œæ£‹ç›˜çš„åˆç›˜<code class="language-plaintext highlighter-rouge">board</code>ï¼Œå½“å‰ç©å®¶<code class="language-plaintext highlighter-rouge">cur_player</code>ï¼Œå±æ€§åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def __init__(self, board=None, size=8, cur_player=-1):
    self.size = size
    self.board = np.zeros((self.size, self.size), int) if board is None else board     # æ£‹ç›˜åˆå§‹çŠ¶æ€ï¼Œè‹¥æœªä¼ å…¥åˆç›˜åˆ™å½“ä½œç©ºæ£‹ç›˜å¤„ç†
    self.cur_player = cur_player   #-1ä»£è¡¨é»‘å­ï¼Œ1ä»£è¡¨ç™½å­
</code></pre></div></div>
<p><br />
åˆ›å»ºä¸€ä¸ªç©å®¶ç±»<code class="language-plaintext highlighter-rouge">Human</code>,æ–¹ä¾¿æˆ‘ä»¬è¯»å–è½å­ä½ç½®ï¼Œå¾—åˆ°ç”¨æˆ·è½å­åæ£‹ç›˜æ ¼å±€ã€‚
æ­¤ç±»çš„åŸºæœ¬å±æ€§ä¸ºå½“å‰ç©å®¶<code class="language-plaintext highlighter-rouge">player</code>åˆå§‹åŒ–ä¸ºé»‘å­-1ï¼Œå±æ€§åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def __init__(self, player=-1):
        self.player = player
</code></pre></div></div>

<p>è¿™äº›ç¯å¢ƒç±»ä¸‹æœ‰æ“ä½œæ£‹ç›˜ï¼Œä¿®æ”¹æ ¼å±€çš„å¤šç§åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ï¼š<br />
<code class="language-plaintext highlighter-rouge">is_move_legal(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰åŠ¨ä½œåœ¨å½“å‰æ£‹ç›˜ä¸‹æ˜¯å¦åˆæ³•ã€‚
<code class="language-plaintext highlighter-rouge">get_legal_pos(self)</code>ï¼šè·å–å½“å‰æ£‹ç›˜å†…æ‰€æœ‰å¯è¡Œæ£‹çš„ä½ç½®ã€‚
<code class="language-plaintext highlighter-rouge">move(self, move_pos)</code>ï¼šæŒ‰ç…§move_posçš„ä½ç½®ä¿®æ”¹å½“å‰æ£‹ç›˜æ ¼å±€ï¼Œå³åœ¨move_posä½ç½®ä¸Šæ”¾ç½®å½“å‰ç©å®¶çš„æ£‹å­ã€‚
<code class="language-plaintext highlighter-rouge">board_result(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰æ£‹ç›˜åœ¨å½“å‰åŠ¨ä½œä¸‹æ˜¯å¦äº§ç”Ÿè¾“èµ¢æˆ–å¹³çš„å±€é¢ã€‚
<code class="language-plaintext highlighter-rouge">game_over(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰æ¸¸æˆæ˜¯å¦ç»“æŸï¼Œè¾“èµ¢æ–¹åˆ†åˆ«æ˜¯è°ï¼Œæˆ–æ˜¯å¦äº§ç”Ÿå¹³å±€å±€é¢ã€‚
<code class="language-plaintext highlighter-rouge">get_action_pos(self, board)</code>ï¼šè¯»å–ç”¨æˆ·è¾“å…¥çš„è½å­ä½ç½®ã€‚
<code class="language-plaintext highlighter-rouge">action(self, board)</code>ï¼šè·å¾—ç”¨æˆ·è½å­åçš„æ£‹ç›˜æ ¼å±€ã€‚</p>

<p><br />
ç›¸åº”ä»£ç å¦‚ä¸‹ï¼š<br /><br /></p>

<p><code class="language-plaintext highlighter-rouge">is_move_legal(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰åŠ¨ä½œåœ¨å½“å‰æ£‹ç›˜ä¸‹æ˜¯å¦åˆæ³•ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def is_move_legal(self, move_pos):
    x, y = move_pos[0], move_pos[1]
    if x &lt; 0 or x &gt; self.size or y &lt; 0 or y &gt; self.size: #åˆ¤æ–­æ˜¯å¦æº¢å‡ºæ£‹ç›˜è¾¹ç•Œ
        return False
    if self.board[x, y] != 0:   #åˆ¤æ–­æ˜¯å¦ä¸‹åœ¨å·²ç»æœ‰æ£‹å­çš„ä½ç½®ä¸Š
        return False
    return True
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">get_legal_pos(self)</code>ï¼šè·å–å½“å‰æ£‹ç›˜å†…æ‰€æœ‰å¯è¡Œæ£‹çš„ä½ç½®ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def get_legal_pos(self):
    indices = np.where(self.board == 0)   #æ‰¾åˆ°æ£‹ç›˜ä¸Šæœªè½å­çš„ä½ç½®
    return list(zip(indices[0], indices[1])) #å°è£…æˆäºŒå…ƒç»„
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">move(self, move_pos)</code>ï¼šæŒ‰ç…§move_posçš„ä½ç½®ä¿®æ”¹å½“å‰æ£‹ç›˜æ ¼å±€ï¼Œå³åœ¨move_posä½ç½®ä¸Šæ”¾ç½®å½“å‰ç©å®¶çš„æ£‹å­</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def move(self, move_pos):
    if not self.is_move_legal(move_pos): 
        raise ValueError("move {0} on board {1} is not legal". format(move_pos, self.board))
    new_board = Board(board=np.copy(self.board), cur_player=-self.cur_player)
    new_board.board[move_pos[0], move_pos[1]] = self.cur_player
    return new_board 
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">board_result(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰æ£‹ç›˜åœ¨å½“å‰åŠ¨ä½œä¸‹æ˜¯å¦äº§ç”Ÿè¾“èµ¢æˆ–å¹³çš„å±€é¢ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def board_result(self, move_pos):
    x, y = move_pos[0], move_pos[1]
    player = self.board[x, y]
    direction = list([[self.board[i][y] for i in range(self.size)]])
    direction.append([self.board[x][j] for j in range(self.size)])
    direction.append(self.board.diagonal(y - x))
    direction.append(np.fliplr(self.board).diagonal(self.size - 1 - y - x))
    for v_list in direction:
        count = 0
        for v in v_list:
            if v == player:
                count += 1
                if count == num_in_a_row_will_win:
                    return True
            else:
                count = 0
    return False
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">game_over(self, move_pos)</code>ï¼šåˆ¤æ–­å½“å‰æ¸¸æˆæ˜¯å¦ç»“æŸï¼Œè¾“èµ¢æ–¹åˆ†åˆ«æ˜¯è°ï¼Œæˆ–æ˜¯å¦äº§ç”Ÿå¹³å±€å±€é¢ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def game_over(self, move_pos):
    if self.board_result(move_pos):
        return 'win'
    elif len(self.get_legal_pos()) == 0:
        return 'tie'
    else:
        return None

</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">get_action_pos(self, board)</code>ï¼šè¯»å–ç”¨æˆ·è¾“å…¥çš„è½å­ä½ç½®ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def get_action_pos(self, board):
    try:
        location = input("Your move(please use commas to separate the two index): ")
        if isinstance(location, str) and len(location.split(",")) == 2:  
            move_pos = tuple([int(n, 10) for n in location.split(",")])     # æå–å‡ºç”¨æˆ·è¾“å…¥çš„ä½ç½®ä¿¡æ¯å¹¶å°è£…
        else:
            move_pos = -1
    except:
        move_pos = -1

    if move_pos == -1 or move_pos not in board.get_legal_pos():
        print("Invalid Move")
        move_pos = self.get_action_pos(board)
    return move_pos
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">action(self, board)</code>ï¼šè·å¾—ç”¨æˆ·è½å­åçš„æ£‹ç›˜æ ¼å±€ã€‚</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def action(self, board):
    move_pos = self.get_action_pos(board)
    board = board.move(move_pos) 
    return board, move_pos
</code></pre></div></div>

<p><br /><br /><br /></p>
<h3 id="å·®ä¸å¤šå°±è¿™ä¹ˆå¤šäº†">å·®ä¸å¤šå°±è¿™ä¹ˆå¤šäº†</h3>
<p>å°†ä¸Šè¿°ç®€å•åŠ¨ä½œç»„åˆåœ¨ä¸€èµ·ï¼Œè¿™äº›ç¯å¢ƒå·²ç»å¯ä»¥å®ç°äº”å­æ£‹çš„åŸºæœ¬åŠŸèƒ½äº†ï¼Œæ¥ä¸‹æ¥å°±è¦æŠŠç›®å…‰èšç„¦åˆ°å¦‚ä½•åˆ©ç”¨è’™ç‰¹å¡æ´›æ ‘æœç´¢è®­ç»ƒæ¨¡å‹å¹¶æ­å»ºèµ·äººæœºæ¸¸æˆçš„æ¨¡å‹ä¸Šï¼Œè¿™äº›å†…å®¹å°†æ”¾åœ¨æˆ‘çš„ä¸‹ä¸€ç¯‡åšå®¢ä¸­ã€‚</p>
:ET